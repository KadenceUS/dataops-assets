<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Shared Methods - My Docs</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Shared Methods";
        var mkdocs_page_input_path = "references/shared_methods.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> My Docs
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Project Overview</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../overview/ProjectOverview/">Project Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Transformation References</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Shared Methods</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#concatenate-data">Concatenate Data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sharedtransformations_concat_parsed_dataframes">SharedTransformations._concat_parsed_dataframes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_coreutils.ETL.transform.SharedTransformations._concat_parsed_dataframes">_concat_parsed_dataframes</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#clean-data">Clean Data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sharedtransformations_clean_data">SharedTransformations._clean_data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_coreutils.ETL.transform.SharedTransformations._clean_data">_clean_data</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#clean-calendar">Clean Calendar</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sharedtransformations_clean_calendar">SharedTransformations._clean_calendar</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_coreutils.ETL.transform.SharedTransformations._clean_calendar">_clean_calendar</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#merge-calendar">Merge Calendar</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sharedtransformations_merge_calendar">SharedTransformations._merge_calendar</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_coreutils.ETL.transform.SharedTransformations._merge_calendar">_merge_calendar</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#quota-bins">Quota bins</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sharedtransformations_make_quota_bins">SharedTransformations._make_quota_bins</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_coreutils.ETL.transform.SharedTransformations._make_quota_bins">_make_quota_bins</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#conditional-column-combines">Conditional Column Combines</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sharedtransformations_conditional_column_merge">SharedTransformations._conditional_column_merge</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_coreutils.ETL.transform.SharedTransformations._conditional_column_merge">_conditional_column_merge</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#method-mapping">Method Mapping</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sharedtransformations_apply_method_mappings">SharedTransformations._apply_method_mappings</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_coreutils.ETL.transform.SharedTransformations._apply_method_mappings">_apply_method_mappings</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#custom-method">Custom Method</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sharedtransformations_custom_method">SharedTransformations._custom_method</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_coreutils.ETL.transform.SharedTransformations._custom_method">_custom_method</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#save-data">Save data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sharedtransformations_save_data">SharedTransformations._save_data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_coreutils.ETL.transform.SharedTransformations._save_data">_save_data</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../schedule_summary_methods/">Schedule Summary Methods</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quotas_methods/">Quotas Methods</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../intake_methods/">Intake Methods</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../calendar_methods/">Calendars Methods</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../common_methods/">Common Methods</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">My Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Transformation References</li>
      <li class="breadcrumb-item active">Shared Methods</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="shared-methods">Shared Methods<a class="headerlink" href="#shared-methods" title="Permanent link">&para;</a></h1>
<h2 id="concatenate-data">Concatenate Data<a class="headerlink" href="#concatenate-data" title="Permanent link">&para;</a></h2>
<h3 id="sharedtransformations_concat_parsed_dataframes">SharedTransformations._concat_parsed_dataframes<a class="headerlink" href="#sharedtransformations_concat_parsed_dataframes" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">



<a id="_coreutils.ETL.transform.SharedTransformations._concat_parsed_dataframes"></a>
    <div class="doc doc-contents first">

        <p>Vertically concatenate dataframes, adding a source column for later slicing into original dataframes indices.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>concat_sources</code></b>
                  (<code><span title="string">string</span></code>)
              –
              <div class="doc-md-description">
                <p>String that denotes where to pull data from.</p>
              </div>
            </li>
            <li>
              <b><code>source_col</code></b>
                  (<code><span title="str">str</span></code>, default:
                      <code>&#39;source&#39;</code>
)
              –
              <div class="doc-md-description">
                <p>Name of the column that stores where each aggregated dataframe came from.. Defaults to 'source'.</p>
              </div>
            </li>
            <li>
              <b><code>drop_duplicates</code></b>
                  (<code>bool, default=False</code>, default:
                      <code>False</code>
)
              –
              <div class="doc-md-description">
                <p>Drop duplicate rows, keeping the first instance. Also reset index.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="TypeError">TypeError</span></code>
              –
              <div class="doc-md-description">
                <p>If the user has references something that is neither a list of dataframes, or a dataframe, raise an error.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    
        <hr />
<pre><code>&gt;&gt;&gt; concat_sources = "Extract.Data Entry"

    Import Data Entry sheets from the extract step.

&gt;&gt;&gt; concat_sources = "Extract.Lucious6.Data Entry"

    Import extracted data for source Lucious 6 with key 'Data Entry'.

&gt;&gt;&gt; concat_sources = "Transformations.2"

    Import results from the second transformation step.
</code></pre>


    </div>

</div><pre><code>Aliases: concat_data
</code></pre>
<p><br></p>
<h2 id="clean-data">Clean Data<a class="headerlink" href="#clean-data" title="Permanent link">&para;</a></h2>
<h3 id="sharedtransformations_clean_data">SharedTransformations._clean_data<a class="headerlink" href="#sharedtransformations_clean_data" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">



<a id="_coreutils.ETL.transform.SharedTransformations._clean_data"></a>
    <div class="doc doc-contents first">

        <p>Clean up a dataframe according to user parameters.</p>
<p>This method does a lot of the repetitive tasks found across legacy Kadence code.</p>


<details class="the-order-of-operations-is" open>
  <summary>The order of operations is</summary>
  <ol>
<li>Ensure boolean typing is cast.</li>
<li>Drop unwanted columns.</li>
<li>Create a date mapping column</li>
<li>Map any variables</li>
<li>Apply blacklist</li>
<li>Apply whitelist</li>
<li>Create projected column</li>
<li>Drop duplicates by column subset.</li>
<li>Set index</li>
<li>Make data view based on column subset.</li>
</ol>
</details>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>data_source</code></b>
                  (<code><span title="string">string</span></code>)
              –
              <div class="doc-md-description">
                <p>String that denotes where to pull data from.</p>
              </div>
            </li>
            <li>
              <b><code>blacklist_filter</code></b>
                  (<code><span title="dict">dict</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>Dictionary of column and blacklisted entries to filter out. Defaults to None.</p>
              </div>
            </li>
            <li>
              <b><code>whitelist_filter</code></b>
                  (<code><span title="dict">dict</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>Dictionary of column and whitelisted entries to keep. Defaults to None.</p>
              </div>
            </li>
            <li>
              <b><code>mappings</code></b>
                  (<code>list of dicts</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>List where each element is a dictionary with a column label as key, and the value is a a mapping dictionary.</p>
              </div>
            </li>
            <li>
              <b><code>mapping_fallback</code></b>
                  (<code>str, default=&#39;&#39;</code>, default:
                      <code>&#39;&#39;</code>
)
              –
              <div class="doc-md-description">
                <p>Value to use when mapping if no mapper key was found. Defaults to ''. If 'original', then use original value.</p>
              </div>
            </li>
            <li>
              <b><code>drop_duplicate_cols</code></b>
                  (<code><span title="list">list</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>List of column names to use for dropping rows based on duplicates within this column subset.</p>
              </div>
            </li>
            <li>
              <b><code>map_date_col</code></b>
                  (<code><span title="string">string</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>Output column name for datetime mapped date strings. If None, skip this step. Defaults to None.</p>
              </div>
            </li>
            <li>
              <b><code>projected_col</code></b>
                  (<code><span title="string">string</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>Output column name for boolean flag about ongoing or future appointments. If None, skip this step. Defaults to None.</p>
              </div>
            </li>
            <li>
              <b><code>projected_whitelist</code></b>
                  (<code><span title="dict">dict</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>Additional columns (keys) and list of whitelisted terms (value) to use for projected column. If None, skip this step. Defaults to None.</p>
              </div>
            </li>
            <li>
              <b><code>dropcols</code></b>
                  (<code><span title="list">list</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>List of column labels to drop from the returned object from this method.</p>
              </div>
            </li>
            <li>
              <b><code>convert_bool</code></b>
                  (<code><span title="bool">bool</span></code>, default:
                      <code>False</code>
)
              –
              <div class="doc-md-description">
                <p>Convert string representations of boolean flags to proper bool type.</p>
              </div>
            </li>
            <li>
              <b><code>view_cols</code></b>
                  (<code><span title="list">list</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>List of columns to return as part of the output object from this method.</p>
              </div>
            </li>
            <li>
              <b><code>index_cols</code></b>
                  (<code><span title="list">list</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>List of columns to use as the new index for the dataframe.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    
        <hr />
<pre><code>&gt;&gt;&gt; data_source = "Extract.Data Entry"

    Import Data Entry sheets from the extract step.

&gt;&gt;&gt; data_source = "Extract.Lucious6.Data Entry"

    Import extracted data for source Lucious 6 with key 'Data Entry'.

&gt;&gt;&gt; data_source = "Transformations.2"

    Import results from the second transformation step.
</code></pre>


    </div>

</div><pre><code>Aliases: clean_data
</code></pre>
<p><br></p>
<h2 id="clean-calendar">Clean Calendar<a class="headerlink" href="#clean-calendar" title="Permanent link">&para;</a></h2>
<h3 id="sharedtransformations_clean_calendar">SharedTransformations._clean_calendar<a class="headerlink" href="#sharedtransformations_clean_calendar" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">



<a id="_coreutils.ETL.transform.SharedTransformations._clean_calendar"></a>
    <div class="doc doc-contents first">

        <p>Reads in calendar data and prepare it for use with other actions by melting (unpivoting it) so it can be joined to other dataframes.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>data_source</code></b>
                  (<code><span title="string">string</span></code>)
              –
              <div class="doc-md-description">
                <p>String that denotes where to pull data from.</p>
              </div>
            </li>
            <li>
              <b><code>var_name</code></b>
                  (<code><span title="str">str</span></code>, default:
                      <code>&#39;Date&#39;</code>
)
              –
              <div class="doc-md-description">
                <p>New column that will hold the former column names. Defaults to 'Date'.</p>
              </div>
            </li>
            <li>
              <b><code>value_name</code></b>
                  (<code><span title="str">str</span></code>, default:
                      <code>&#39;Unique ID&#39;</code>
)
              –
              <div class="doc-md-description">
                <p>New column that will hold the former column values. Defaults to 'Unique ID'.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="TypeError">TypeError</span></code>
              –
              <div class="doc-md-description">
                <p>Unrecognized calendar data found in memory. Expects a single dataframe, or list of dataframes.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    
        <hr />
<pre><code>&gt;&gt;&gt; data_source = "Extract.Data Entry"

    Import Data Entry sheets from the extract step.

&gt;&gt;&gt; data_source = "Extract.Lucious6.Data Entry"

    Import extracted data for source Lucious 6 with key 'Data Entry'.

&gt;&gt;&gt; data_source = "Transformations.2"

    Import results from the second transformation step.
</code></pre>


    </div>

</div><pre><code>Aliases: clean_calendar_data
</code></pre>
<p><br></p>
<h2 id="merge-calendar">Merge Calendar<a class="headerlink" href="#merge-calendar" title="Permanent link">&para;</a></h2>
<h3 id="sharedtransformations_merge_calendar">SharedTransformations._merge_calendar<a class="headerlink" href="#sharedtransformations_merge_calendar" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">



<a id="_coreutils.ETL.transform.SharedTransformations._merge_calendar"></a>
    <div class="doc doc-contents first">

        <p>Merge calendar data into another data source.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>data_source</code></b>
                  (<code><span title="string">string</span></code>)
              –
              <div class="doc-md-description">
                <p>String that denotes where to pull data from.</p>
              </div>
            </li>
            <li>
              <b><code>accumulator_source</code></b>
                  (<code><span title="string">string</span></code>)
              –
              <div class="doc-md-description">
                <p>String that denotes where to pull data from (this is the dataframe that will have calendar data added to it)</p>
              </div>
            </li>
            <li>
              <b><code>var_name</code></b>
                  (<code><span title="str">str</span></code>, default:
                      <code>&#39;Date&#39;</code>
)
              –
              <div class="doc-md-description">
                <p>New column name made from the melted calendar. Defaults to 'Date'.</p>
              </div>
            </li>
            <li>
              <b><code>value_name</code></b>
                  (<code><span title="str">str</span></code>, default:
                      <code>&#39;Unique ID&#39;</code>
)
              –
              <div class="doc-md-description">
                <p>Value name argument to pass to PD.melt. Defaults to 'Unique ID'.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="TypeError">TypeError</span></code>
              –
              <div class="doc-md-description">
                <p>If the user has references something that is neither a list of dataframes, or a dataframe, raise an error.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    
        <hr />
<pre><code>&gt;&gt;&gt; data_source||accumulator_source = "Extract.Data Entry"

    Import Data Entry sheets from the extract step.

&gt;&gt;&gt; data_source||accumulator_source = "Extract.Lucious6.Data Entry"

    Import extracted data for source Lucious 6 with key 'Data Entry'.

&gt;&gt;&gt; data_source||accumulator_source = "Transformations.2"

    Import results from the second transformation step.
</code></pre>


    </div>

</div><pre><code>Aliases: merge_calendar_data
</code></pre>
<p><br></p>
<h2 id="quota-bins">Quota bins<a class="headerlink" href="#quota-bins" title="Permanent link">&para;</a></h2>
<h3 id="sharedtransformations_make_quota_bins">SharedTransformations._make_quota_bins<a class="headerlink" href="#sharedtransformations_make_quota_bins" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">



<a id="_coreutils.ETL.transform.SharedTransformations._make_quota_bins"></a>
    <div class="doc doc-contents first">

        <p>Make new binned columns for quotas tabulation. Uses the data_parameters dictionary that is read in as part of general config load in main.py.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>data_source</code></b>
                  (<code><span title="string">string</span></code>)
              –
              <div class="doc-md-description">
                <p>String that denotes where to pull data from.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    
        <hr />
<pre><code>&gt;&gt;&gt; data_source = "Extract.Data Entry"

    Import Data Entry sheets from the extract step.

&gt;&gt;&gt; data_source = "Extract.Lucious6.Data Entry"

    Import extracted data for source Lucious 6 with key 'Data Entry'.

&gt;&gt;&gt; data_source = "Transformations.2"

    Import results from the second transformation step.
</code></pre>


    </div>

</div><pre><code>Aliases: make_quota_bins
</code></pre>
<p><br></p>
<h2 id="conditional-column-combines">Conditional Column Combines<a class="headerlink" href="#conditional-column-combines" title="Permanent link">&para;</a></h2>
<h3 id="sharedtransformations_conditional_column_merge">SharedTransformations._conditional_column_merge<a class="headerlink" href="#sharedtransformations_conditional_column_merge" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">



<a id="_coreutils.ETL.transform.SharedTransformations._conditional_column_merge"></a>
    <div class="doc doc-contents first">

        <p>This method goes over an index column, and for each value looks for that value in the mapping keys. If found, it will place the value from the mapping key column into the output column.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>data_source</code></b>
                  (<code><span title="string">string</span></code>)
              –
              <div class="doc-md-description">
                <p>String that denotes where to pull data from.</p>
              </div>
            </li>
            <li>
              <b><code>outcol</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>Name of the output column to create with the correctly mapped values.</p>
              </div>
            </li>
            <li>
              <b><code>index_col</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>Name of the column to use to select between possible mapping keys.</p>
              </div>
            </li>
            <li>
              <b><code>mapping</code></b>
                  (<code><span title="dict">dict</span></code>)
              –
              <div class="doc-md-description">
                <p>Dictionary with the possible values found in the index col as keys, and the column label to pull from if that value is found in the index.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    
        <hr />
<pre><code>&gt;&gt;&gt; data_source = "Extract.Data Entry"

    Import Data Entry sheets from the extract step.

&gt;&gt;&gt; data_source = "Extract.Lucious6.Data Entry"

    Import extracted data for source Lucious 6 with key 'Data Entry'.

&gt;&gt;&gt; data_source = "Transformations.2"

    Import results from the second transformation step.

&gt;&gt;&gt; index_col = 'Gender' &amp; mapping={'Male':'Male Height Group','Female': 'Female Height Group'} &amp; outcol='Combined Height Group'

    For each row, it finds the value in the 'Gender' column.
    If it finds 'Male', it places the 'Male Height Group' value in 'Combined Height Group'.
    If 'Female', it places the 'Female Height Group' values in the outcol.
</code></pre>


    </div>

</div><pre><code>Aliases: combine_columns
</code></pre>
<p><br></p>
<h2 id="method-mapping">Method Mapping<a class="headerlink" href="#method-mapping" title="Permanent link">&para;</a></h2>
<h3 id="sharedtransformations_apply_method_mappings">SharedTransformations._apply_method_mappings<a class="headerlink" href="#sharedtransformations_apply_method_mappings" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">



<a id="_coreutils.ETL.transform.SharedTransformations._apply_method_mappings"></a>
    <div class="doc doc-contents first">

        <p>Loop through a dictionary full of mappings to apply to a dataframe.
For example, one could clean name, email, and phone by passing a dictionary with the keys as the methods for cleaning each of these entries.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>data_source</code></b>
                  (<code><span title="string">string</span></code>)
              –
              <div class="doc-md-description">
                <p>String that denotes where to pull data from.</p>
              </div>
            </li>
            <li>
              <b><code>mappings</code></b>
                  (<code><span title="dict">dict</span></code>)
              –
              <div class="doc-md-description">
                <p>Dictionary with method names as keys, pointing to another dictionary.
             This inner dictionary must have an 'outcol' key, which states the output column name to place the results into.
             Any additional elements in the inner dictionary get converted into inputs for the requested method.
             If only 'outcol' is provided, sends the entire row to the method.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    
        <hr />
<pre><code>&gt;&gt;&gt; data_source = "Extract.Data Entry"

    Import Data Entry sheets from the extract step.

&gt;&gt;&gt; data_source = "Extract.Lucious6.Data Entry"

    Import extracted data for source Lucious 6 with key 'Data Entry'.

&gt;&gt;&gt; data_source = "Transformations.2"

    Import results from the second transformation step.

&gt;&gt;&gt; mappings = {'common_methods.clean_names': {'outcol': 'Cleaned Name','name_value': 'Name'}}

    Call the method common_methods.clean_names, pass the input argument 'name_value' the column labeled 'Name' from data source.
    Saves results to column 'Cleaned Name' in data source.
</code></pre>


    </div>

</div><pre><code>Aliases: method_maps
</code></pre>
<p><br></p>
<h2 id="custom-method">Custom Method<a class="headerlink" href="#custom-method" title="Permanent link">&para;</a></h2>
<h3 id="sharedtransformations_custom_method">SharedTransformations._custom_method<a class="headerlink" href="#sharedtransformations_custom_method" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">



<a id="_coreutils.ETL.transform.SharedTransformations._custom_method"></a>
    <div class="doc doc-contents first">

        <p>Use a custom method as a step in the workflow. This is useful for project specific tasks, like in quotas.
For example, you might call a separate method that does the very project specific work of handling BMI, which
is not needed for most other projects.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>script_path</code></b>
                  (<code>(<span title="filepath">filepath</span>, <span title="str">str</span>)</code>)
              –
              <div class="doc-md-description">
                <p>Filepath to the script containing your custom method.</p>
              </div>
            </li>
            <li>
              <b><code>method_name</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>Method name in external script to import.</p>
              </div>
            </li>
            <li>
              <b><code>kwargs</code></b>
                  (<code><span title="dict">dict</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>A dictionary with the input arguments to custom method. If a 'load' dictionary is passed, then load data from within the pipeline using the .Transformation notation.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>        <h4 id="_coreutils.ETL.transform.SharedTransformations._custom_method--examples">Examples:<a class="headerlink" href="#_coreutils.ETL.transform.SharedTransformations._custom_method--examples" title="Permanent link">&para;</a></h4>
<pre><code>```
'script_path' = '/mnt/c/Users/bprager_kadence/My Documents/GitHub/dataops/projects/lucious_6/_lib/_custom_calendar_methods.py',
'method_name' = '_calculate_metrics'
'kwargs' = {'load'={'data_entry': 'Transformations.9','remaining_lookup': 'Transformations.10[0]','target_lookup': 'Transformations.10[1]'},'debug':False}
```

    Use the method `_calculate_metrics` within the script found at script path.
    kwargs['load'] is parsed such that the 'load' dictionary gets unpacked and sends _calculate_metrics results from previous transformation steps.
    In this example, _calculate_metrics(data_entry="Transformations.9 data").
    Any keys not named load get their values passed as is (i.e. _calculate_metrics(...,debug=False))
</code></pre>


    </div>

</div><pre><code>Aliases: custom_function
</code></pre>
<p><br></p>
<h2 id="save-data">Save data<a class="headerlink" href="#save-data" title="Permanent link">&para;</a></h2>
<h3 id="sharedtransformations_save_data">SharedTransformations._save_data<a class="headerlink" href="#sharedtransformations_save_data" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">



<a id="_coreutils.ETL.transform.SharedTransformations._save_data"></a>
    <div class="doc doc-contents first">

        <p>Save data to disk. Useful for testing your workflow to make sure everything works as expected at any point in the process.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>data_source</code></b>
                  (<code><span title="string">string</span></code>)
              –
              <div class="doc-md-description">
                <p>String that denotes where to pull data from.</p>
              </div>
            </li>
            <li>
              <b><code>outpath</code></b>
                  (<code><span title="str">str</span> / <span title="filepath">filepath</span></code>)
              –
              <div class="doc-md-description">
                <p>Path on disk to save data to.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    
        <hr />
<pre><code>&gt;&gt;&gt; data_source = "Extract.Data Entry"

    Import Data Entry sheets from the extract step.

&gt;&gt;&gt; data_source = "Extract.Lucious6.Data Entry"

    Import extracted data for source Lucious 6 with key 'Data Entry'.

&gt;&gt;&gt; data_source = "Transformations.2"

    Import results from the second transformation step.
</code></pre>


    </div>

</div><pre><code>Aliases: save
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../overview/ProjectOverview/" class="btn btn-neutral float-left" title="Project Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../schedule_summary_methods/" class="btn btn-neutral float-right" title="Schedule Summary Methods">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../overview/ProjectOverview/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../schedule_summary_methods/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
